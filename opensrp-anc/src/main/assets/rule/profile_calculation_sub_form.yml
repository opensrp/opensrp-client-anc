---
name: step1_hiv_risk
description: HIV Risk
priority: 1
condition: "(step4_hiv_positive != 1 && (global_site_anc_hiv == 1 || step8_partner_hiv_positive == 1 || step7_alcohol_substance_use.contains('injectable_drugs') || step1_occupation.contains('informal_employment_sex_worker')))"
actions:
  - "calculation = 1"
---
name: step2_lmp_edd
description: LMP EDD
priority: 1
condition: "true"
actions:
  - "calculation = helper.addDuration(global_lmp,'7d-9m')"
---
name: step2_lmp_gest_age
description: LMP Gest age
priority: 1
condition: "true"
actions:
  - "calculation = helper.getWeeksAndDaysFromDays(helper.getDifferenceDays(global_lmp))"
---
name: step2_gest_edd_label
description: EDD label
priority: 1
condition: "true"
actions:
  - "calculation = step2_sfh_edd"
---
name: step2_ultrasound_edd
description: Ultrasound edd
priority: 1
condition: "true"
actions:
  - "calculation = helper.addDuration(global_lmp, ( (280 - ( (step2_ultrasound_gest_age_wks * 7) + step2_ultrasound_gest_age_days) ) +'d'))"
---
name: step2_ultrasound_gest_age
description: Ultrasound gest age
priority: 1
condition: "true"
actions:
  - "calculation = helper.getWeeksAndDaysFromDays(280 + (helper.getDifferenceDays(step2_ultrasound_edd)))"
---
name: step2_sfh_edd
description: SFH edd
priority: 1
condition: "true"
actions:
  - "calculation = helper.addDuration( (280 - (step2_sfh_gest_age * 7) ) + 'd' )"
---
name: step3_previous_pregnancies
description: Previous pregnancies
priority: 1
condition: "true"
actions:
  - "calculation = step3_gravida - 1 "
---
name: step3_parity
description: Previous pregnancies
priority: 1
condition: "(step3_gravida > 1)"
actions:
  - "calculation = step3_live_births + step3_stillbirths"
---
name: step3_preeclampsia_risk
description: preeclampsia_risk
priority: 1
condition: "(global_no_of_fetuses >= 2) || (step3_prev_preg_comps.contains('pre_eclampsia_eclampsia') || step3_prev_preg_comps.contains('convulsions')) || (step4_health_conditions.contains('diabetes') || step4_health_conditions.contains('Hypertension') || step4_health_conditions.contains('kidney_disease'))"
actions:
  - "calculation = 1"
---
name: step3_gdm_risk
description: gdm_risk
priority: 1
condition: "(global_bmi >= 30) || (step3_prev_preg_comps.contains('gestational_diabetes') || step3_prev_preg_comps.contains('macrosomia')) || (global_urine_glucose == '++' || global_urine_glucose == '+++' || global_urine_glucose == '++++')"
actions:
  - "calculation = 1"
---
name: step4_hiv_positive
description: hiv_positive
priority: 1
condition: "(global_hiv_test_result == 'positive') || (step4_health_conditions.contains('hiv'))"
actions:
  - "calculation = 1"
---
name: step7_hiv_risk
description: HIV Risk
priority: 1
condition: "(step4_hiv_positive != 1 && (global_site_anc_hiv == 1 || step8_partner_hiv_positive == 1 || step7_alcohol_substance_use.contains('injectable_drugs') || step1_occupation.contains('informal_employment_sex_worker')))"
actions:
  - "calculation = 1"
---
name: step8_hiv_risk
description: HIV Risk
priority: 1
condition: "(step4_hiv_positive != 1 && (global_site_anc_hiv == 1 || step8_partner_hiv_positive == 1 || step7_alcohol_substance_use.contains('injectable_drugs') || step1_occupation.contains('informal_employment_sex_worker')))"
actions:
  - "calculation = 1"
---
name: step8_partner_hiv_positive
description: HIV Risk
priority: 1
condition: "(step8_partner_hiv_status == 'positive' && global_hiv_test_result == 'positive' )"
actions:
  - "calculation = 1"
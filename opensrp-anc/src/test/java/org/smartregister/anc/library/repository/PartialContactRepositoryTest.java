package org.smartregister.anc.library.repository;

import android.content.ContentValues;

import net.sqlcipher.Cursor;
import net.sqlcipher.database.SQLiteDatabase;

import org.json.JSONObject;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.ArgumentCaptor;
import org.mockito.Captor;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.MockitoAnnotations;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;
import org.powermock.reflect.Whitebox;
import org.smartregister.anc.library.model.PartialContact;
import org.smartregister.repository.AllSharedPreferences;
import org.smartregister.repository.Repository;
import org.smartregister.view.activity.DrishtiApplication;

import java.util.Calendar;
import java.util.List;

@RunWith(PowerMockRunner.class)
@PrepareForTest({DrishtiApplication.class, Calendar.class})
public class PartialContactRepositoryTest {

    @Mock
    private Repository repository;

    @Mock
    private SQLiteDatabase sqLiteDatabase;

    @Mock
    private DrishtiApplication drishtiApplication;

    @Captor
    private ArgumentCaptor argumentCaptor;

    @Mock
    private Cursor cursor;

    @Mock
    private Calendar calendar;
    PartialContactRepository partialContactRepository = new PartialContactRepository();


    @Before
    public void setUp() {
        MockitoAnnotations.initMocks(this);
        PowerMockito.mockStatic(DrishtiApplication.class);
        PowerMockito.mockStatic(Calendar.class);
        //PowerMockito.mockStatic(Utils.class);

        MockitoAnnotations.openMocks(this);

        PowerMockito.when(DrishtiApplication.getInstance()).thenReturn(drishtiApplication);


        PowerMockito.when(drishtiApplication.getRepository()).thenReturn(repository);
        PowerMockito.when(repository.getWritableDatabase()).thenReturn(sqLiteDatabase);

        PowerMockito.when(Calendar.getInstance()).thenReturn(calendar);

    }

    @Test
    public void savePartialContactTest()
    {
        PowerMockito.mockStatic(DrishtiApplication.class);
        PowerMockito.mockStatic(Calendar.class);


        PowerMockito.when(DrishtiApplication.getInstance()).thenReturn(drishtiApplication);

        PowerMockito.when(drishtiApplication.getRepository()).thenReturn(repository);
        PowerMockito.when(repository.getWritableDatabase()).thenReturn(sqLiteDatabase);
        PowerMockito.when(repository.getReadableDatabase()).thenReturn(sqLiteDatabase);

       PowerMockito.when(sqLiteDatabase.query(
                Mockito.anyString(),
                Mockito.any(),
                Mockito.any(),
                Mockito.any(),
                Mockito.isNull(),
                Mockito.isNull(),
                Mockito.isNull(),
                Mockito.isNull()))
               .thenReturn(cursor);

        PowerMockito.when(cursor.getCount()).thenReturn(1);
        PowerMockito.when(cursor.moveToFirst()).thenReturn(true);

        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.ID)).thenReturn(1);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.TYPE)).thenReturn(2);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.FORM_JSON)).thenReturn(3);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.CONTACT_NO)).thenReturn(4);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.FORM_JSON_DRAFT)).thenReturn(5);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.IS_FINALIZED)).thenReturn(6);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.BASE_ENTITY_ID)).thenReturn(7);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.CREATED_AT)).thenReturn(8);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.UPDATED_AT_COLUMN)).thenReturn(9);


        PowerMockito.when(cursor.getLong(1)).thenReturn(1000L);
        PowerMockito.when(cursor.getString(2)).thenReturn("anc_profile");
        PowerMockito.when(cursor.getString(3)).thenReturn("form");
        PowerMockito.when(cursor.getInt(4)).thenReturn(123123);
        PowerMockito.when(cursor.getString(5)).thenReturn("draft");
        PowerMockito.when(cursor.getInt(6)).thenReturn(1);
        PowerMockito.when(cursor.getString(7)).thenReturn("base_id");
        PowerMockito.when(cursor.getLong(8)).thenReturn(123L);
        PowerMockito.when(cursor.getLong(9)).thenReturn(123L);





        PartialContactRepository spyRepository = Mockito.spy(partialContactRepository);
        PartialContact partialContact = new PartialContact();
        partialContact.setBaseEntityId("base_ID");
        partialContact.setType("anc_profile");
        partialContact.setContactNo(132312132);
        partialContact.setFinalized(true);
        partialContact.setCreatedAt(123123L);
        partialContact.setUpdatedAt(12312313L);
        spyRepository.savePartialContact(partialContact);


        Mockito.verify(sqLiteDatabase).update(Mockito.eq("partial_contact"), (ContentValues) argumentCaptor.capture(),
                (String) argumentCaptor.capture(), (String[]) argumentCaptor.capture());


    }


    @Test
    public void testCreateTable()
    {
        PartialContactRepository.createTable(sqLiteDatabase);
        Mockito.verify(sqLiteDatabase,Mockito.times(4)).execSQL(Mockito.anyString());

    }
    @Test
    public void getPartialContactsTest()
    {

        PowerMockito.mockStatic(DrishtiApplication.class);
        PowerMockito.mockStatic(Calendar.class);

        PowerMockito.when(DrishtiApplication.getInstance()).thenReturn(drishtiApplication);


        PowerMockito.when(drishtiApplication.getRepository()).thenReturn(repository);
        PowerMockito.when(repository.getWritableDatabase()).thenReturn(sqLiteDatabase);
        PowerMockito.when(repository.getReadableDatabase()).thenReturn(sqLiteDatabase);

        PowerMockito.when(sqLiteDatabase.query(
                Mockito.anyString(),
                Mockito.any(),
                Mockito.any(),
                Mockito.any(),
                Mockito.isNull(),
                Mockito.isNull(),
                Mockito.isNull(),
                Mockito.isNull()))
                .thenReturn(cursor);



            Mockito.when(cursor.moveToNext()).thenReturn(true).thenReturn(false);


        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.ID)).thenReturn(1);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.TYPE)).thenReturn(2);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.FORM_JSON)).thenReturn(3);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.CONTACT_NO)).thenReturn(4);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.FORM_JSON_DRAFT)).thenReturn(5);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.IS_FINALIZED)).thenReturn(6);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.BASE_ENTITY_ID)).thenReturn(7);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.CREATED_AT)).thenReturn(8);
        PowerMockito.when(cursor.getColumnIndex(PartialContactRepository.UPDATED_AT_COLUMN)).thenReturn(9);


        PowerMockito.when(cursor.getLong(1)).thenReturn(1000L);
        PowerMockito.when(cursor.getString(2)).thenReturn("anc_profile");
        PowerMockito.when(cursor.getString(3)).thenReturn("form");
        PowerMockito.when(cursor.getInt(4)).thenReturn(123123);
        PowerMockito.when(cursor.getString(5)).thenReturn("draft");
        PowerMockito.when(cursor.getInt(6)).thenReturn(1);
        PowerMockito.when(cursor.getString(7)).thenReturn("base_id");
        PowerMockito.when(cursor.getLong(8)).thenReturn(123L);
        PowerMockito.when(cursor.getLong(9)).thenReturn(123L);


        PartialContactRepository spyRepository = Mockito.spy(partialContactRepository);
       List<PartialContact> partialContactList =  spyRepository.getPartialContacts("baseID",1);
       Assert.assertEquals(partialContactList.size(),1);



    }

    @Test
    public void testDeleteDraftJson()
    {
        PowerMockito.mockStatic(DrishtiApplication.class);
        PowerMockito.mockStatic(Calendar.class);

        PowerMockito.when(DrishtiApplication.getInstance()).thenReturn(drishtiApplication);


        PowerMockito.when(drishtiApplication.getRepository()).thenReturn(repository);
        PowerMockito.when(repository.getWritableDatabase()).thenReturn(sqLiteDatabase);

        partialContactRepository.deleteDraftJson("base_ID");
        Mockito.verify(sqLiteDatabase).execSQL(Mockito.anyString(),Mockito.any());


    }


    @Test
    public void deletePartialContactTest()
    {
        PowerMockito.mockStatic(DrishtiApplication.class);
        PowerMockito.mockStatic(Calendar.class);

        PowerMockito.when(DrishtiApplication.getInstance()).thenReturn(drishtiApplication);


        PowerMockito.when(drishtiApplication.getRepository()).thenReturn(repository);
        PowerMockito.when(repository.getWritableDatabase()).thenReturn(sqLiteDatabase);


        partialContactRepository.deletePartialContact(123L);
        Mockito.verify(sqLiteDatabase).delete(Mockito.anyString(),Mockito.anyString(),Mockito.any());

    }



    @Test
    public void clearPartialContactTest()
    {
        PowerMockito.mockStatic(DrishtiApplication.class);
        PowerMockito.mockStatic(Calendar.class);

        PowerMockito.when(DrishtiApplication.getInstance()).thenReturn(drishtiApplication);


        PowerMockito.when(drishtiApplication.getRepository()).thenReturn(repository);
        PowerMockito.when(repository.getWritableDatabase()).thenReturn(sqLiteDatabase);


        partialContactRepository.clearPartialRepository();
        Mockito.verify(sqLiteDatabase).delete(Mockito.anyString(), Mockito.anyString(), Mockito.any());
    }

    @Test
    public void testAddProviderDetails() throws Exception {
        String draftJsonForm = "{\"validate_on_submit\":true,\"display_scroll_bars\":true,\"skip_blank_steps\":true,\"count\":\"4\",\"encounter_type\":\"Symptoms and Follow-up\",\"entity_id\":\"\",\"relational_id\":\"\",\"form_version\":\"0.0.1\",\"filtered_items\":[\"step2_behaviour_persist\",\"step3_phys_symptoms_persist\",\"step3_other_symptoms_persist\"],\"default_values\":[\"medications\",\"medications_other\",\"phys_symptoms_persist\",\"other_sym_lbpp\",\"other_sym_vvo\",\"other_symptoms_persist\",\"ipv_physical_signs_symptoms\"],\"global_previous\":[\"caffeine_intake\",\"tobacco_user\",\"shs_exposure\",\"condom_use\",\"alcohol_substance_use\",\"phys_symptoms\",\"other_symptoms\",\"calcium_supp\",\"vita_supp\",\"syphilis_positive\",\"pe_risk_aspirin_calcium\",\"pe_risk_aspirin\",\"ifa_high_prev\",\"ifa_low_prev\",\"ifa_weekly\",\"ifa_anaemia\",\"ipv_physical_signs_symptoms\"],\"metadata\":{\"start\":{\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_data_type\":\"start\",\"openmrs_entity_id\":\"163137AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"value\":\"2022-09-26 15:51:06\"},\"end\":{\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_data_type\":\"end\",\"openmrs_entity_id\":\"163138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},\"today\":{\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"encounter\",\"openmrs_entity_id\":\"encounter_date\"},\"deviceid\":{\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_data_type\":\"deviceid\",\"openmrs_entity_id\":\"163149AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"value\":\"\"},\"subscriberid\":{\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_data_type\":\"subscriberid\",\"openmrs_entity_id\":\"163150AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"value\":\"\"},\"simserial\":{\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_data_type\":\"simserial\",\"openmrs_entity_id\":\"163151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"value\":\"\"},\"phonenumber\":{\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_data_type\":\"phonenumber\",\"openmrs_entity_id\":\"163152AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"value\":\"\"},\"encounter_location\":\"44de66fb-e6c6-4bae-92bb-386dfe626eba\",\"look_up\":{\"entity_id\":\"\",\"value\":\"\"}},\"step1\":{\"title\":\"Medication Follow-up\",\"next\":\"step2\",\"fields\":[{\"key\":\"medications\",\"openmrs_entity_parent\":\"160741AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"159367AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"check_box\",\"label\":\"What medications (including supplements and vitamins) is she still taking?\",\"label_info_text\":\"The woman reported taking these medications in the previous contact. Un-select the medications that she has stopped taking. If still taking, leave them selected.\",\"label_info_title\":\"Medication follow-up\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"dont_know\",\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.none.text\",\"value\":false,\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\"},{\"key\":\"dont_know\",\"text\":\"Don't know\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.dont_know.text\",\"value\":false,\"openmrs_entity_id\":\"1067AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\"},{\"key\":\"antacids\",\"text\":\"Antacids\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.antacids.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"944AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"aspirin\",\"text\":\"Aspirin\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.aspirin.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"71617AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"calcium\",\"text\":\"Calcium\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.calcium.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"72650AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"doxylamine\",\"text\":\"Doxylamine\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.doxylamine.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"75229AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"folic_acid\",\"text\":\"Folic Acid\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.folic_acid.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"76613AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"iron\",\"text\":\"Iron\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.iron.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"78218AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"magnesium\",\"text\":\"Magnesium\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.magnesium.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"79224AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"metoclopramide\",\"text\":\"Metoclopramide\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.metoclopramide.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"79755AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"vitamina\",\"text\":\"Vitamin A\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.vitamina.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"86339AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"analgesic\",\"text\":\"Analgesic\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.analgesic.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165231AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"anti_convulsive\",\"text\":\"Anti-convulsive\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.anti_convulsive.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165230AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"anti_diabetic\",\"text\":\"Anti-diabetic\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.anti_diabetic.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"159460AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"anthelmintic\",\"text\":\"Anthelmintic\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.anthelmintic.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165238AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"anti_hypertensive\",\"text\":\"Anti-hypertensive\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.anti_hypertensive.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165237AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"anti_malarials\",\"text\":\"Anti-malarials\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.anti_malarials.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"5839AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"antivirals\",\"text\":\"Antivirals\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.antivirals.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165236AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"arvs\",\"text\":\"Antiretrovirals (ARVs)\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.arvs.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1085AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"prep_hiv\",\"text\":\"Oral pre-exposure prophylaxis (PrEP) for HIV\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.prep_hiv.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"antitussive\",\"text\":\"Antitussive\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.antitussive.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165235AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"asthma\",\"text\":\"Asthma\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.asthma.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165234AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"cotrimoxazole\",\"text\":\"Cotrimoxazole\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.cotrimoxazole.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"105281AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"antibiotics\",\"text\":\"Other antibiotics\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.antibiotics.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1195AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"hematinic\",\"text\":\"Hematinic\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.hematinic.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165233AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"hemorrhoidal\",\"text\":\"Hemorrhoidal medication\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.hemorrhoidal.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165255AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"multivitamin\",\"text\":\"Multivitamin\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.multivitamin.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"461AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"thyroid\",\"text\":\"Thyroid medication\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.thyroid.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165232AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"other\",\"text\":\"Other (specify)\",\"translation_text\":\"anc_symptoms_follow_up.step1.medications.options.other.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Please specify the medication(s) that the woman is still taking\"},\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is-rule-check\":false,\"is_visible\":false},{\"key\":\"medications_other\",\"openmrs_entity_parent\":\"159367AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"160632AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"edit_text\",\"hint\":\"Specify\",\"v_regex\":{\"value\":\"[A-Za-z\\\\s\\\\.\\\\-]*\",\"err\":\"Please enter valid content\"},\"relevance\":{\"step1:medications\":{\"ex-checkbox\":[{\"or\":[\"other\"]}]}},\"is_visible\":false},{\"key\":\"calcium_comply\",\"openmrs_entity_parent\":\"72650AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Is she taking her calcium supplements?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"options\":[{\"key\":\"yes\",\"text\":\"Yes\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},{\"key\":\"no\",\"text\":\"No\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"calcium_effects\",\"openmrs_entity_parent\":\"72650AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165273AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Any calcium supplement side effects?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"options\":[{\"key\":\"yes\",\"text\":\"Yes\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},{\"key\":\"no\",\"text\":\"No\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"ifa_comply\",\"openmrs_entity_parent\":\"104677AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Is she taking her IFA tablets?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"options\":[{\"key\":\"yes\",\"text\":\"Yes\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},{\"key\":\"no\",\"text\":\"No\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"ifa_effects\",\"openmrs_entity_parent\":\"104677AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165273AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Any IFA side effects?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"options\":[{\"key\":\"yes\",\"text\":\"Yes\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},{\"key\":\"no\",\"text\":\"No\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"aspirin_comply\",\"openmrs_entity_parent\":\"71617AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Is she taking her aspirin tablets?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"options\":[{\"key\":\"yes\",\"text\":\"Yes\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},{\"key\":\"no\",\"text\":\"No\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"vita_comply\",\"openmrs_entity_parent\":\"86339AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Is she taking her Vitamin A supplements?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"options\":[{\"key\":\"yes\",\"text\":\"Yes\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},{\"key\":\"no\",\"text\":\"No\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"penicillin_comply\",\"openmrs_entity_parent\":\"81724AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Is she taking her penicillin treatment for syphilis?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"label_info_text\":\"A maximum of up to 3 weekly doses may be required.\",\"label_info_title\":\"Syphilis Compliance\",\"options\":[{\"key\":\"yes\",\"text\":\"Yes\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"},{\"key\":\"no\",\"text\":\"No\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false}],\"skipped\":true},\"step2\":{\"title\":\"Previous Behaviour\",\"next\":\"step3\",\"fields\":[{\"key\":\"behaviour_persist\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165251AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"check_box\",\"label\":\"Which of the following behaviours persist?\",\"label_info_text\":\"These behaviours were reported in the previous contact. Select the ones that are still occurring or select \\\"None\\\".\",\"label_info_title\":\"Previous behaviours\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"filter_options\":[{\"key\":\"global_previous_tobacco_user\",\"value\":\"[yes, recently_quit]\"},{\"key\":\"global_previous_condom_use\",\"value\":\"no\"},{\"key\":\"global_previous_shs_exposure\",\"value\":\"yes\"},{\"key\":\"global_previous_alcohol_substance_use\",\"value\":\"!none\",\"options\":[\"alcohol_use\",\"substance_use\"]},{\"key\":\"global_previous_caffeine_intake\",\"value\":\"!none\"}],\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Previous persisting behaviour is required\"},\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_filtered\":true},{\"key\":\"toaster0\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Caffeine reduction counseling\",\"toaster_info_text\":\"Lowering daily caffeine intake during pregnancy is recommended to reduce the risk of pregnancy loss and low-birth-weight neonates.\\n\\nThis includes any product, beverage or food containing caffeine (e.g. brewed coffee, tea, cola-type soft drinks, caffeinated energy drinks, chocolate, caffeine tablets). Caffeine-containing teas (black tea and green tea) and soft drinks (colas and iced tea) usually contain less than 50 mg per 250 mL serving.\",\"toaster_info_title\":\"Caffeine intake folder\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step2:behaviour_persist\":{\"ex-checkbox\":[{\"or\":[\"caffeine_intake\"]}]}}},{\"key\":\"toaster1\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"TOBACCO USE COUNSELLING\",\"openmrs_entity_id\":\"1455\",\"type\":\"toaster_notes\",\"text\":\"Tobacco cessation counseling\",\"toaster_info_text\":\"Healthcare providers should routinely offer advice and psycho-social interventions for tobacco cessation to all pregnant women who are either current tobacco users or recent tobacco quitters.\",\"text_color\":\"#E20000\",\"toaster_type\":\"problem\",\"relevance\":{\"step2:behaviour_persist\":{\"ex-checkbox\":[{\"or\":[\"tobacco_user\"]}]}}},{\"key\":\"toaster2\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Second-hand smoke counseling\",\"toaster_info_text\":\"Provide pregnant women, their partners and other household members with advice and information about the risks of second-hand smoke (SHS) exposure from all forms of smoked tobacco, as well as strategies to reduce SHS in the home.\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step2:behaviour_persist\":{\"ex-checkbox\":[{\"or\":[\"shs_exposure\"]}]}}},{\"key\":\"toaster3\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"Counseling regarding condom\",\"openmrs_entity_id\":\"161594\",\"type\":\"toaster_notes\",\"text\":\"Condom counseling\",\"toaster_info_text\":\"Advise to use condoms to prevent Zika, HIV and other STIs. If necessary, re-assure it is ok to continue to have sex during pregnancy.\",\"text_color\":\"#E20000\",\"toaster_type\":\"problem\",\"relevance\":{\"step2:behaviour_persist\":{\"ex-checkbox\":[{\"or\":[\"condom_use\"]}]}}},{\"key\":\"toaster4\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"ALCOHOL COUNSELING\",\"openmrs_entity_id\":\"1288\",\"type\":\"toaster_notes\",\"text\":\"Alcohol \\/ substance use counseling\",\"toaster_info_text\":\"Healthcare providers should at the earliest opportunity advise pregnant women dependent on alcohol or drugs to cease their alcohol or drug use and offer, or refer them to, detoxification services under medical supervision, where necessary and applicable.\",\"text_color\":\"#E20000\",\"toaster_type\":\"problem\",\"relevance\":{\"step2:behaviour_persist\":{\"ex-checkbox\":[{\"or\":[\"alcohol_use\",\"substance_use\"]}]}}}],\"skipped\":true},\"step3\":{\"title\":\"Previous Symptoms\",\"next\":\"step4\",\"fields\":[{\"key\":\"phys_symptoms_persist\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Which of the following physiological symptoms persist?\",\"label_info_text\":\"These symptoms were reported in the previous contact. Select the ones that are still occurring or select \\\"None\\\".\",\"label_info_title\":\"Previous Symptoms\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"filter_options_source\":\"global_previous_phys_symptoms\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.none.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"nausea_vomiting\",\"text\":\"Nausea and vomiting\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.nausea_vomiting.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"133473AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"heartburn\",\"text\":\"Heartburn\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.heartburn.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"139059AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"leg_cramps\",\"text\":\"Leg cramps\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.leg_cramps.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"135969AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"constipation\",\"text\":\"Constipation\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.constipation.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"996AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"low_back_pain\",\"text\":\"Low back pain\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.low_back_pain.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"116225AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"pelvic_pain\",\"text\":\"Pelvic pain\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.pelvic_pain.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"131034AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"varicose_veins\",\"text\":\"Varicose veins\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.varicose_veins.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"156666AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"oedema\",\"text\":\"Oedema\",\"translation_text\":\"anc_symptoms_follow_up.step3.phys_symptoms_persist.options.oedema.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"460AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Previous persisting physiological symptoms is required\"},\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}}},{\"key\":\"other_sym_lbpp\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Any other symptoms related to low back and pelvic pain?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"contractions\",\"text\":\"Contractions\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"163750AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"dysuria\",\"text\":\"Pain during urination (dysuria)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"118771AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"pelvic_pains\",\"text\":\"Extreme pelvic pain, can't walk (symphysis pubis dysfunction)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165270AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Please specify any other symptoms related to low back pain or select none\"},\"relevance\":{\"step3:phys_symptoms_persist\":{\"ex-checkbox\":[{\"or\":[\"low_back_pain\",\"pelvic_pain\"]}]}}},{\"key\":\"other_sym_vvo\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Any other symptoms related to varicose veins or oedema?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"leg_pain\",\"text\":\"Leg pain\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"114395AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"leg_redness\",\"text\":\"Leg redness\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165215AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Please specify any other symptoms related varicose vein\\/oedema or select none\"},\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}}},{\"key\":\"toaster5\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Pharmacological treatments for nausea and vomiting counseling\",\"toaster_info_text\":\"Pharmacological treatments for nausea and vomiting, such as doxylamine and metoclopramide, should be reserved for those pregnant women experiencing distressing symptoms that are not relieved by non-pharmacological options, under the supervision of a medical doctor.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step3:phys_symptoms_persist\":{\"ex-checkbox\":[{\"or\":[\"nausea_vomiting\"]}]}}},{\"key\":\"toaster6\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Antacid preparations to relieve heartburn counseling\",\"toaster_info_text\":\"Antacid preparations can be offered to women with troublesome symptoms that are not relieved by lifestyle modification. Magnesium carbonate and aluminium hydroxide preparations are probably unlikely to cause harm in recommended dosages.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step3:phys_symptoms_persist\":{\"ex-checkbox\":[{\"or\":[\"heartburn\"]}]}}},{\"key\":\"toaster7\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Magnesium and calcium to relieve leg cramps counseling\",\"toaster_info_text\":\"If leg cramps are not relieved with non-pharma measures, then give 300–360 mg magnesium per day in two or three divided doses; give calcium 1 g twice daily for two weeks.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step3:phys_symptoms_persist\":{\"ex-checkbox\":[{\"or\":[\"leg_cramps\"]}]}}},{\"key\":\"toaster8\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Wheat bran or other fiber supplements to relieve constipation counseling\",\"toaster_info_text\":\"Wheat bran or other fiber supplements can be used to relieve constipation, if dietary modifications are not enough, and if they are available and appropriate.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step3:phys_symptoms_persist\":{\"ex-checkbox\":[{\"or\":[\"constipation\"]}]}}},{\"key\":\"toaster9\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Regular exercise, physiotherapy, support belts and acupuncture to relieve low back and pelvic pain counseling\",\"toaster_info_text\":\"Regular exercise throughout pregnancy is recommended to prevent low back and pelvic pain. There are a number of different treatment options that can be used, such as physiotherapy, support belts and acupuncture, based on a woman’s preferences and available options.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}}},{\"key\":\"toaster10\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Please investigate any possible complications or onset of labour, related to low back and pelvic pain\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step3:other_sym_lbpp\":{\"ex-checkbox\":[{\"or\":[\"contractions\",\"pelvic_pains\"]}]}}},{\"key\":\"toaster11\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Urine test required\",\"toaster_info_text\":\"Woman has dysuria. Please investigate urinary tract infection and treat if positive.\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step3:other_sym_lbpp\":{\"ex-checkbox\":[{\"or\":[\"dysuria\"]}]}}},{\"key\":\"toaster12\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Non-pharmacological options for varicose veins and oedema counseling\",\"toaster_info_text\":\"Non-pharmacological options, such as compression stockings, leg elevation and water immersion, can be used for the management of varicose veins and oedema in pregnancy, based on a woman’s preferences and available options.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}}},{\"key\":\"toaster13\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Please investigate any possible complications, including thrombosis, related to varicose veins and oedema\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step3:other_sym_vvo\":{\"ex-checkbox\":[{\"or\":[\"leg_pain\",\"leg_redness\"]}]}}},{\"key\":\"other_symptoms_persist\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Which of the following other symptoms persist?\",\"label_text_style\":\"bold\",\"label_info_text\":\"These symptoms were reported in the previous contact. Select the ones that are still occurring or select \\\"None\\\".\",\"label_info_title\":\"Previous Symptoms\",\"text_color\":\"#000000\",\"filter_options_source\":\"global_previous_other_symptoms\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"abnormal_vaginal_discharge\",\"text\":\"Abnormal vaginal discharge (physiological) (foul smelling) (curd like)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"123395AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"breathing_difficulty\",\"text\":\"Breathing difficulty\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"142373AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"breathless\",\"text\":\"Breathless during routine activities\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"110265AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"cough\",\"text\":\"Cough lasting more than 3 weeks\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1487AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"fever\",\"text\":\"Fever\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"140238AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"easily_tired\",\"text\":\"Gets tired easily\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"140501AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"headache\",\"text\":\"Headache\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"139084AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"vaginal_bleeding\",\"text\":\"Vaginal bleeding\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"147232AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"visual_disturbance\",\"text\":\"Visual disturbance\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"123074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}}}],\"skipped\":true},\"step4\":{\"title\":\"Physiological Symptoms\",\"fields\":[{\"key\":\"phys_symptoms\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Any physiological symptoms?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.none.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"nausea_vomiting\",\"text\":\"Nausea and vomiting\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.nausea_vomiting.text\",\"value\":\"true\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"133473AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"heartburn\",\"text\":\"Heartburn\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.heartburn.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"139059AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"leg_cramps\",\"text\":\"Leg cramps\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.leg_cramps.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"135969AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"constipation\",\"text\":\"Constipation\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.constipation.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"996AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"low_back_pain\",\"text\":\"Low back pain\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.low_back_pain.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"116225AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"pelvic_pain\",\"text\":\"Pelvic pain\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.pelvic_pain.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"131034AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"varicose_veins\",\"text\":\"Varicose veins\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.varicose_veins.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"156666AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"oedema\",\"text\":\"Oedema\",\"translation_text\":\"anc_symptoms_follow_up.step4.phys_symptoms.options.oedema.text\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"460AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Please specify any other physiological symptoms or select none\"},\"is-rule-check\":true,\"step\":\"step4\"},{\"key\":\"other_sym_lbpp\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Any other symptoms related to low back and pelvic pain?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"contractions\",\"text\":\"Contractions\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"163750AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"dysuria\",\"text\":\"Pain during urination (dysuria)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"118771AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"pelvic_pains\",\"text\":\"Extreme pelvic pain, can't walk (symphysis pubis dysfunction)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165270AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Please specify any other symptoms related low back and pelvic pain or select none\"},\"relevance\":{\"step4:phys_symptoms\":{\"ex-checkbox\":[{\"or\":[\"low_back_pain\",\"pelvic_pain\"]}]}},\"is_visible\":false,\"is-rule-check\":true,\"step\":\"step4\"},{\"key\":\"other_sym_vvo\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Any other symptoms related to varicose veins or oedema?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"leg_pain\",\"text\":\"Leg pain\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"114395AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"leg_redness\",\"text\":\"Leg redness\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"165215AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Please specify any other symptoms related varicose vein\\/oedema or select none\"},\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is-rule-check\":true,\"step\":\"step4\",\"is_visible\":false},{\"key\":\"toaster14\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Non-pharma measures to relieve nausea and vomiting counseling\",\"toaster_info_text\":\"Ginger, chamomile, vitamin B6 and\\/or acupuncture are recommended for the relief of nausea in early pregnancy, based on a woman’s preferences and available options. Women should be informed that symptoms of nausea and vomiting usually resolve in the second half of pregnancy.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step4:phys_symptoms\":{\"ex-checkbox\":[{\"or\":[\"nausea_vomiting\"]}]}},\"is_visible\":true},{\"key\":\"toaster15\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Diet and lifestyle changes to prevent and relieve heartburn counseling\",\"toaster_info_text\":\"Advice on diet and lifestyle is recommended to prevent and relieve heartburn in pregnancy. Antacid preparations can be offered to women with troublesome symptoms that are not relieved by lifestyle modification.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step4:phys_symptoms\":{\"ex-checkbox\":[{\"or\":[\"heartburn\"]}]}},\"is_visible\":false},{\"key\":\"toaster16\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Non-pharmacological treatment for the relief of leg cramps counseling\",\"toaster_info_text\":\"Non-pharmacological therapies, including muscle stretching, relaxation, heat therapy, dorsiflexion of the foot, and massage can be used for the relief of leg cramps in pregnancy.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step4:phys_symptoms\":{\"ex-checkbox\":[{\"or\":[\"leg_cramps\"]}]}},\"is_visible\":false},{\"key\":\"toaster17\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Dietary modifications to relieve constipation counseling\",\"toaster_info_text\":\"Dietary modifications to relieve constipation include promoting adequate intake of water and dietary fibre (found in vegetables, nuts, fruits and whole grains).\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"step4:phys_symptoms\":{\"ex-checkbox\":[{\"or\":[\"constipation\"]}]}},\"is_visible\":false},{\"key\":\"toaster18\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Regular exercise, physiotherapy, support belts and acupuncture to relieve low back and pelvic pain counseling\",\"toaster_info_text\":\"Regular exercise throughout pregnancy is recommended to prevent low back and pelvic pain. There are a number of different treatment options that can be used, such as physiotherapy, support belts and acupuncture, based on a woman’s preferences and available options.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"toaster19\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Please investigate any possible complications or onset of labour, related to low back and pelvic pain\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step4:other_sym_lbpp\":{\"ex-checkbox\":[{\"or\":[\"contractions\",\"pelvic_pains\"]}]}},\"is_visible\":false},{\"key\":\"toaster20\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Urine test required\",\"toaster_info_text\":\"Woman has dysuria. Please investigate urinary tract infection and treat if positive.\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step4:other_sym_lbpp\":{\"ex-checkbox\":[{\"or\":[\"dysuria\"]}]}},\"is_visible\":false},{\"key\":\"toaster21\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Non-pharmacological options for varicose veins and oedema counseling\",\"toaster_info_text\":\"Non-pharmacological options, such as compression stockings, leg elevation and water immersion, can be used for the management of varicose veins and oedema in pregnancy, based on a woman’s preferences and available options.\",\"text_color\":\"#4855B3\",\"toaster_type\":\"info\",\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"toaster22\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Please investigate any possible complications, including thrombosis, related to varicose veins and oedema\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"step4:other_sym_vvo\":{\"ex-checkbox\":[{\"or\":[\"leg_pain\",\"leg_redness\"]}]}},\"is_visible\":false},{\"key\":\"other_symptoms\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Any other symptoms?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"None\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"abnormal_vaginal_discharge\",\"text\":\"Abnormal vaginal discharge (physiological) (foul smelling) (curd like)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"123395AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"breathing_difficulty\",\"text\":\"Breathing difficulty\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"142373AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"breathless\",\"text\":\"Breathless during routine activities\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"110265AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"cough\",\"text\":\"Cough lasting more than 3 weeks\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1487AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"fever\",\"text\":\"Fever\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"140238AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"easily_tired\",\"text\":\"Gets tired easily\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"140501AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"headache\",\"text\":\"Headache\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"139084AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"vaginal_bleeding\",\"text\":\"Vaginal bleeding\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"147232AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"visual_disturbance\",\"text\":\"Visual disturbance\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"123074AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"other\",\"text\":\"Other (specify)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"v_required\":{\"value\":\"true\",\"err\":\"Please specify any other symptoms or select none\"},\"is-rule-check\":false},{\"key\":\"other_symptoms_other\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"160632AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"edit_text\",\"hint\":\"Specify\",\"v_regex\":{\"value\":\"[A-Za-z\\\\s\\\\.\\\\-]*\",\"err\":\"Please enter valid content\"},\"relevance\":{\"step4:other_symptoms\":{\"ex-checkbox\":[{\"or\":[\"other\"]}]}},\"is_visible\":false},{\"key\":\"ipv_signs_symptoms\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"check_box\",\"label\":\"Presenting signs and symptoms that trigger suspicion of IPV\",\"label_info_text\":\"What signs or symptoms does the client present with that are due to or trigger suspicion of intimate partner violence (IPV)?\",\"label_info_title\":\"Presenting signs and symptoms of IPV\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"exclusive\":[\"none\"],\"options\":[{\"key\":\"none\",\"text\":\"No presenting signs or symptoms indicative of IPV\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"stress\",\"text\":\"Ongoing stress\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"anxiety\",\"text\":\"Ongoing anxiety\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"depression\",\"text\":\"Ongoing depression\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"emotional_health_issues\",\"text\":\"Unspecified ongoing emotional health issues\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"alcohol_misuse\",\"text\":\"Misuse of alcohol\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"drugs_misuse\",\"text\":\"Misuse of drugs\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"harmful_behaviour\",\"text\":\"Unspecified harmful behaviours\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"suicide_thoughts\",\"text\":\"Thoughts of self-harm or (attempted) suicide\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"suicide_plans\",\"text\":\"Plans of self-harm or (attempt) suicide\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"suicide_acts\",\"text\":\"Acts of self-harm or attempted suicide\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"repeat_stis\",\"text\":\"Repeated sexually transmitted infections (STIs)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"unwanted_pregnancies\",\"text\":\"Unwanted pregnancies\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"chronic_pain\",\"text\":\"Unexplained chronic pain\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"gastro_symptoms\",\"text\":\"Unexplained chronic gastrointestinal symptoms\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"genitourinary_symptoms\",\"text\":\"Unexplained genitourinary symptoms\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"adverse_repro_outcomes\",\"text\":\"Adverse reproductive outcomes\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"unexplained_repro_symptoms\",\"text\":\"Unexplained reproductive symptoms\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"repeat_vaginal_bleeding\",\"text\":\"Repeated vaginal bleeding\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"injury_abdomen\",\"text\":\"Injury to abdomen\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"injury_other\",\"text\":\"Injury other (specify)\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"problems_cns\",\"text\":\"Problems with central nervous system\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"repeat_health_consultations\",\"text\":\"Repeated health consultations with no clear diagnosis\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"intrusive_partner\",\"text\":\"Woman's partner or husband is intrusive during consultations\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"misses_appointments\",\"text\":\"Woman often misses her own or her children's health-care appointments\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"},{\"key\":\"children_emotional_problems\",\"text\":\"Children have emotional and behavioural problems\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"openmrs_entity_parent\":\"\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"step\":\"step4\",\"is-rule-check\":false,\"is_visible\":false},{\"key\":\"ipv_signs_symptoms_injury_other\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"\",\"type\":\"edit_text\",\"hint\":\"Other injury - specify\",\"v_regex\":{\"value\":\"[A-Za-z\\\\s\\\\.\\\\-]*\",\"err\":\"Please enter valid content\"},\"relevance\":{\"step4:ipv_signs_symptoms\":{\"ex-checkbox\":[{\"or\":[\"injury_other\"]}]}},\"is_visible\":false},{\"key\":\"ipv_suspect\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"hidden\",\"value\":\"0\",\"calculation\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_calculation_rules.yml\"}}},\"step\":\"step4\",\"is-rule-check\":true},{\"key\":\"toaster23\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"\",\"openmrs_entity_id\":\"\",\"type\":\"toaster_notes\",\"text\":\"Woman is suspected of being subjected to IPV. Please conduct an IPV clinical enquiry during the physical exam part of the contact.\",\"text_color\":\"#D56900\",\"toaster_type\":\"warning\",\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"is_visible\":false},{\"key\":\"mat_percept_fetal_move\",\"openmrs_entity_parent\":\"\",\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"162107AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"type\":\"native_radio\",\"label\":\"Has the woman felt the baby move?\",\"label_text_style\":\"bold\",\"text_color\":\"#000000\",\"options\":[{\"key\":\"normal_fetal_move\",\"text\":\"Normal fetal movement\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"162108AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"reduced_fetal_move\",\"text\":\"Reduced or poor fetal movement\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"113377AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"},{\"key\":\"no_fetal_move\",\"text\":\"No fetal movement\",\"value\":false,\"openmrs_entity\":\"concept\",\"openmrs_entity_id\":\"1452AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\"openmrs_entity_parent\":\"\"}],\"relevance\":{\"rules-engine\":{\"ex-rules\":{\"rules-file\":\"sf_relevance_rules.yml\"}}},\"v_required\":{\"value\":\"true\",\"err\":\"Field has the woman felt the baby move is required\"},\"is_visible\":false}]},\"properties_file_name\":\"anc_symptoms_follow_up\",\"global\":{\"site_ultrasound\":false,\"site_ipv_assess\":false,\"pop_hiv_generalized\":true,\"pop_hepc\":false,\"pop_anaemia_20\":true,\"pop_malaria\":true,\"pop_syphilis\":false,\"pop_hiv_incidence\":false,\"pop_low_calcium\":true,\"pop_helminth\":false,\"pop_hiv_concentrated\":true,\"pop_vita\":false,\"pop_undernourish\":true,\"pop_hepb_screening\":true,\"pop_anaemia_40\":false,\"pop_hepb\":false,\"pop_tb\":false,\"gest_age_openmrs\":\"4\",\"alcohol_substance_use\":\"\",\"alcohol_substance_use_value\":\"\",\"gest_age\":\"\",\"syphilis_positive\":\"\",\"previous_contact_no\":\"0\",\"ifa_weekly\":\"\",\"ifa_high_prev\":\"\",\"ipv_signs_symptoms_value\":\"\",\"ipv_physical_signs_symptoms_value\":\"\",\"vita_supp\":\"\",\"condom_use\":\"\",\"health_conditions\":\"\",\"contact_no\":\"1\",\"other_substance_use\":\"\",\"tobacco_user\":\"\",\"pe_risk_aspirin_calcium\":\"\",\"pe_risk_aspirin\":\"\",\"shs_exposure\":\"\",\"calcium_supp\":\"\",\"ipv_physical_signs_symptoms\":\"\",\"ipv_signs_symptoms\":\"\",\"caffeine_intake\":\"\",\"caffeine_intake_value\":\"\",\"last_contact_date\":\"\",\"hypertension\":\"\",\"ifa_low_prev\":\"\",\"age\":\"17\",\"ifa_anaemia\":\"\",\"previous_caffeine_intake\":\"\",\"previous_tobacco_user\":\"\",\"previous_shs_exposure\":\"\",\"previous_condom_use\":\"\",\"previous_alcohol_substance_use\":\"\",\"previous_phys_symptoms\":\"\",\"previous_other_symptoms\":\"\",\"previous_calcium_supp\":\"\",\"previous_vita_supp\":\"\",\"previous_syphilis_positive\":\"\",\"previous_pe_risk_aspirin_calcium\":\"\",\"previous_pe_risk_aspirin\":\"\",\"previous_ifa_high_prev\":\"\",\"previous_ifa_low_prev\":\"\",\"previous_ifa_weekly\":\"\",\"previous_ifa_anaemia\":\"\",\"previous_ipv_physical_signs_symptoms\":\"\"},\"invisible_required_fields\":\"[other_sym_lbpp, other_sym_vvo, medications, mat_percept_fetal_move]\",\"details\":{\"appVersionName\":\"0.0.6-SNAPSHOT\",\"formVersion\":\"0.0.1\"}}";
        PartialContact partialContact = new PartialContact();
        partialContact.setFormJson(draftJsonForm);
        AllSharedPreferences allSharedPreferences = Mockito.mock(AllSharedPreferences.class);
        PartialContactRepository partialContactRepositorySpy = Mockito.spy(partialContactRepository);
        String providerId = "demo";
        Mockito.doReturn(providerId).when(allSharedPreferences).fetchRegisteredANM();
        Mockito.doReturn(PatientRepositoryTest.DUMMY_BASE_ENTITY_ID).when(allSharedPreferences).getUserId(providerId);
        Mockito.doReturn("teamId").when(allSharedPreferences).fetchDefaultTeamId(providerId);
        Mockito.doReturn(ContactTasksRepositoryTest.DUMMY_BASE_ENTITY_ID).when(allSharedPreferences).fetchDefaultTeamId(providerId);
        Mockito.doReturn("DemoTeam").when(allSharedPreferences).fetchDefaultTeam(providerId);
        Mockito.doReturn("Bukesa").when(allSharedPreferences).fetchDefaultLocationId();
        Whitebox.invokeMethod(partialContactRepositorySpy, "addPractitionerDetails", partialContact);
        JSONObject partialContactForm = new JSONObject(partialContact.getFormJson());
        partialContactForm.optString("providerDetails");
        Assert.assertNotNull(partialContactForm.optString("providerDetails"));
    }
}
